# Artie00 Helm Chart

This chart represents a specific instance of an Artie robot (artie00) and extends the `artie-base` chart.

## Architecture

The `artie00` chart uses Helm's dependency mechanism to inherit all configuration from `artie-base`:

- **artie-base**: Contains all the common Kubernetes resources, configurations, and templates that any Artie robot needs
- **artie00**: Overrides specific values for this particular Artie instance and can add instance-specific resources

## Directory Structure

```
artie00/
├── Chart.yaml           # Chart metadata with artie-base dependency
├── values.yaml          # Artie00-specific value overrides
├── templates/           # Artie00-specific templates (if any)
│   └── NOTES.txt       # Installation notes
└── charts/             # Generated by `helm dependency update` (gitignored)
    └── artie-base/     # The artie-base chart will be copied here
```

## Usage

### Building the Chart

Before installing, you need to update the dependencies to pull in `artie-base`:

```bash
cd artietool/deploy-files/artie00
helm dependency update
```

This will:
1. Read the dependencies from `Chart.yaml`
2. Copy the `artie-base` chart into the `charts/` directory
3. Create a `Chart.lock` file to track dependency versions

### Installing

```bash
helm install artie00-release ./artie00 --namespace artie --create-namespace
```

### Customizing Artie00

To customize artie00, edit the `values.yaml` file. All values under the `artie-base:` key will be passed to the artie-base chart:

```yaml
artie-base:
  artieId: artie00
  imageTag: 3d23200b

  # Override any artie-base values
  ports:
    resetDriver: 18861
```

### Adding Artie00-Specific Resources

If artie00 needs additional Kubernetes resources not present in artie-base, add them as templates in the `templates/` directory. For example:

```
templates/
├── NOTES.txt
└── artie00-custom-service.yaml
```

## Relationship with artie-base

- All base functionality comes from `artie-base`
- The `artie-base` chart is deployed as a subchart
- Values are passed to `artie-base` via the `artie-base:` prefix in `values.yaml`
- Templates in `artie00/templates/` are additional to (not replacements of) `artie-base` templates

## Development Workflow

1. Make changes to common functionality in `artie-base`
2. Update the artie-base version in `artie00/Chart.yaml` if needed
3. Run `helm dependency update` to pull in the changes
4. Test with `helm install` or `helm upgrade`

## Benefits of This Structure

- **DRY**: Shared configuration lives in one place (artie-base)
- **Maintainability**: Bug fixes and features in artie-base automatically apply to all Artie instances
- **Flexibility**: Each Artie instance can still have custom configuration
- **Versioning**: artie-base can be versioned independently
