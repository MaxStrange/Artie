name: telemetry-hardware-tests
labels:
  - docker-image
  - hardware
dependencies:
  - artie-base-image: artie-base
  - artie-cli: docker-image
type: test
steps:
  - job: hardware-test-suite
    cli-image:
      dependency:
        name: docker-image
        producing-task: artie-cli
    steps:
      - test-name: init-mcu
        cmd-to-run-in-cli: "artie-cli help"
        expected-outputs:
          - what: "Writing 0x0 to "
            where: daemonsets/reset-driver
          - what: "Loaded FW successfully."
            where: daemonsets/eyebrows-driver
          - what: "Writing 0x0 to "
            where: deployments/log-collector
          - what: "Loaded FW successfully."
            where: log-collector
          - what: "Test Passed"
            where: metrics-collector
      - test-name: fw-load
        cmd-to-run-in-cli: "artie-cli eyebrows fw load"
        expected-outputs:
          - what: "Writing 0x0 to "
            where: daemonsets/reset-driver
          - what: "Loaded FW successfully."
            where: daemonsets/eyebrows-driver
          - what: "Writing 0x0 to "
            where: deployments/log-collector
          - what: "Loaded FW successfully."
            where: log-collector
          - what: "Test Passed"
            where: metrics-collector
